---
alwaysApply: true
---
# Project Structure – Supervisor, Finance Agent, Memory

- Supervisor graph entrypoint: [app/agents/supervisor/agent.py](mdc:app/agents/supervisor/agent.py)
  - Compiles the supervisor graph, registers delegation tools, wires memory nodes
- Delegation tools (handoff): [app/agents/supervisor/handoff.py](mdc:app/agents/supervisor/handoff.py)
  - Shared tool factory with per‑agent guideline support
- Finance agent (graph + runtime):
  - Prompt builder: [app/agents/supervisor/finance_agent/prompts.py](mdc:app/agents/supervisor/finance_agent/prompts.py)
  - Agent wrapper: [app/agents/supervisor/finance_agent/agent.py](mdc:app/agents/supervisor/finance_agent/agent.py)
  - Subgraph wiring: [app/agents/supervisor/finance_agent/subgraph.py](mdc:app/agents/supervisor/finance_agent/subgraph.py)
  - SQL tool & enforcement: [app/agents/supervisor/finance_agent/tools.py](mdc:app/agents/supervisor/finance_agent/tools.py)
- Finance procedural memory:
  - Store file: [finance_procedural_templates.jsonl](mdc:finance_procedural_templates.jsonl)
  - Manager/fallbacks: [app/agents/supervisor/finance_agent/procedural_memory/sql_hints/procedural_templates.py](mdc:app/agents/supervisor/finance_agent/procedural_memory/sql_hints/procedural_templates.py)
- DB table constants: [app/repositories/postgres/finance_repository.py](mdc:app/repositories/postgres/finance_repository.py)
- Supervisor service (SSE, streaming, persistence): [app/services/supervisor.py](mdc:app/services/supervisor.py)
- Memory pipeline (context, episodic, hotpath): [app/agents/supervisor/memory](mdc:app/agents/supervisor/memory)
